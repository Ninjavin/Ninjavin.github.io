---
layout: page
title: daily
permalink: /daily/
weight: 2
---

<div class="daily-dashboard">
  <!-- Content Header -->
  <div class="dashboard-header text-center mb-4">
    <h2 class="display-5 font-weight-bold">üìÖ Daily Finds</h2>
    <p class="text-muted">Explore my curated collection of interesting links, one day at a time.</p>
  </div>

  <div class="dashboard-body">
    <!-- Sidebar: Interactive Calendar -->
    <aside class="calendar-sidebar">
      <div class="calendar-wrapper card-inner">
        <div class="calendar-header d-flex justify-content-between align-items-center mb-3">
          <button id="prevMonth" class="btn btn-sm btn-link"><i class="fas fa-chevron-left"></i></button>
          <h5 id="currentMonthAndYear" class="m-0"></h5>
          <button id="nextMonth" class="btn btn-sm btn-link"><i class="fas fa-chevron-right"></i></button>
        </div>
        <div class="calendar-grid-header">
          <span>S</span><span>M</span><span>T</span><span>W</span><span>T</span><span>F</span><span>S</span>
        </div>
        <div id="calendarDays" class="calendar-grid">
          <!-- Days populated by JS -->
        </div>
      </div>

      <!-- <div class="stats-card mt-3 card-inner">
        <div class="d-flex justify-content-between align-items-center">
          <span>Total Finds</span>
          <span class="badge badge-primary">{{ site.data.daily_links.size }}</span>
        </div>
      </div> -->
    </aside>

    <!-- Main Content: Link Display -->
    <main class="content-display">
      <div id="activeLinkContainer">
        <!-- Selected link details populated by JS -->
        <div class="empty-state text-center p-5 card-inner">
          <div class="mb-3" style="font-size: 3rem;">üîç</div>
          <h4>Select a date on the calendar</h4>
          <p class="text-muted">Dates highlighted in blue contain an interesting link!</p>
        </div>
      </div>
    </main>
  </div>
</div>

<!-- Data Passing to JS -->
<script id="daily-data" type="application/json">
  {{ site.data.daily_links | jsonify }}
</script>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    const data = JSON.parse(document.getElementById('daily-data').textContent);
    const linksMap = {};
    data.forEach(item => {
      // Standardize date format to YYYY-MM-DD
      const dateStr = new Date(item.date).toISOString().split('T')[0];
      linksMap[dateStr] = item;
    });

    const calendarDays = document.getElementById('calendarDays');
    const currentMonthHeader = document.getElementById('currentMonthAndYear');
    const activeLinkContainer = document.getElementById('activeLinkContainer');

    let currentMonth = new Date().getMonth();
    let currentYear = new Date().getFullYear();

    function renderCalendar(month, year) {
      calendarDays.innerHTML = '';
      const firstDay = new Date(year, month).getDay();
      const daysInMonth = 32 - new Date(year, month, 32).getDate();

      currentMonthHeader.innerText = new Intl.DateTimeFormat('en-US', { month: 'long', year: 'numeric' }).format(new Date(year, month));

      // Fill empty spots for first week
      for (let i = 0; i < firstDay; i++) {
        const emptyDiv = document.createElement('div');
        emptyDiv.classList.add('calendar-day', 'empty');
        calendarDays.appendChild(emptyDiv);
      }

      // Fill actual days
      for (let i = 1; i <= daysInMonth; i++) {
        const dayBox = document.createElement('div');
        dayBox.classList.add('calendar-day');
        dayBox.innerText = i;

        const checkDate = `${year}-${String(month + 1).padStart(2, '0')}-${String(i).padStart(2, '0')}`;

        if (linksMap[checkDate]) {
          dayBox.classList.add('has-link');
          dayBox.id = `day-${checkDate}`;
          dayBox.addEventListener('click', (event) => showLink(linksMap[checkDate], event.target));
        }

        if (i === new Date().getDate() && month === new Date().getMonth() && year === new Date().getFullYear()) {
          dayBox.classList.add('today');
        }

        calendarDays.appendChild(dayBox);
      }
    }

    function getYoutubeEmbedUrl(url) {
      let videoId = '';
      if (url.includes('youtu.be')) {
        videoId = url.split('/').pop().split('?')[0];
      } else if (url.includes('youtube.com')) {
        const urlParams = new URLSearchParams(new URL(url).search);
        videoId = urlParams.get('v');
      }
      return videoId ? `https://www.youtube.com/embed/${videoId}` : null;
    }

    function showLink(link, targetElement) {
      // Clear previous selection
      document.querySelectorAll('.calendar-day').forEach(d => d.classList.remove('active'));

      // Add active class
      if (targetElement) {
        targetElement.classList.add('active');
      } else {
        const dayElement = document.getElementById(`day-${link.date}`);
        if (dayElement) dayElement.classList.add('active');
      }

      const dateObj = new Date(link.date);
      const formattedDate = dateObj.toLocaleDateString('en-US', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' });

      let mainContentHtml = '';
      if (link.type === 'video') {
        const embedUrl = getYoutubeEmbedUrl(link.url);
        mainContentHtml = `
            <div class="video-post-container">
              <div class="d-flex justify-content-between align-items-center mb-3">
                <span class="type-tag ${link.type}">${link.type}</span>
              </div>
              <div class="video-embed-wrapper mb-4">
                ${embedUrl ? `
                  <div class="video-container">
                    <iframe src="${embedUrl}" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                  </div>
                ` : `<div class="p-4 text-center border rounded">üé¨ Video Link: <a href="${link.url}" target="_blank">${link.url}</a></div>`}
              </div>
              <h3 class="mb-3">${link.title}</h3>
            </div>
          `;
      } else {
        mainContentHtml = `
            <div class="regular-post-container">
              <div class="d-flex justify-content-between align-items-start mb-3">
                <span class="type-tag ${link.type}">${link.type}</span>
              </div>
              <h3 class="mb-3">${link.title}</h3>
            </div>
          `;
      }

      activeLinkContainer.innerHTML = `
      <div class="selected-link-card card-inner animate__animated animate__fadeIn">
        ${mainContentHtml}
        <p class="description-text mb-4">${link.description}</p>
        <div class="action-area">
          <a href="${link.url}" target="_blank" class="btn btn-primary btn-md px-4">Visit Link <i class="fas fa-external-link-alt ml-2"></i></a>
        </div>
        <div class="calendar-preview-leaf mt-5">
           <div class="leaf-header">${dateObj.toLocaleDateString('en-US', { weekday: 'short' })}</div>
           <div class="leaf-body">
              <span class="day-num">${dateObj.getDate()}</span>
              <span class="month-small">${dateObj.toLocaleDateString('en-US', { month: 'short' })}</span>
           </div>
        </div>
      </div>
    `;
    }

    document.getElementById('prevMonth').addEventListener('click', () => {
      currentYear = (currentMonth === 0) ? currentYear - 1 : currentYear;
      currentMonth = (currentMonth === 0) ? 11 : currentMonth - 1;
      renderCalendar(currentMonth, currentYear);
    });

    document.getElementById('nextMonth').addEventListener('click', () => {
      currentYear = (currentMonth === 11) ? currentYear + 1 : currentYear;
      currentMonth = (currentMonth === 11) ? 0 : currentMonth + 1;
      renderCalendar(currentMonth, currentYear);
    });

    // Initial Render
    renderCalendar(currentMonth, currentYear);

    // Default selection: Today's link or the most recent one
    const todayStr = new Date().toISOString().split('T')[0];
    if (linksMap[todayStr]) {
      showLink(linksMap[todayStr]);
    } else {
      const latestDate = Object.keys(linksMap).sort().reverse()[0];
      if (latestDate) {
        // If latest link is in a different month, switch to it
        const latestObj = new Date(latestDate);
        if (latestObj.getMonth() !== currentMonth || latestObj.getFullYear() !== currentYear) {
          currentMonth = latestObj.getMonth();
          currentYear = latestObj.getFullYear();
          renderCalendar(currentMonth, currentYear);
        }
        showLink(linksMap[latestDate]);
      }
    }
  });
</script>

<style>
  .daily-dashboard {
    max-width: 1100px;
    margin: 0 auto;
  }

  .dashboard-body {
    display: grid;
    grid-template-columns: 320px 1fr;
    gap: 2rem;
    align-items: start;
  }

  /* Calendar Sidebar Styles */
  .calendar-wrapper {
    padding: 1.5rem;
  }

  .calendar-grid-header {
    display: grid;
    grid-template-columns: repeat(7, 1fr);
    text-align: center;
    font-weight: 800;
    font-size: 0.75rem;
    color: #adb5bd;
    margin-bottom: 1rem;
  }

  .calendar-grid {
    display: grid;
    grid-template-columns: repeat(7, 1fr);
    gap: 4px;
  }

  .calendar-day {
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: default;
    font-size: 0.9rem;
    border-radius: 8px;
    transition: all 0.2s;
  }

  .calendar-day.has-link {
    cursor: pointer;
    background: rgba(0, 123, 255, 0.1);
    color: #007bff;
    font-weight: 700;
  }

  .calendar-day.has-link:hover {
    background: #007bff;
    color: white;
  }

  .calendar-day.active {
    background: #007bff !important;
    color: white !important;
    box-shadow: 0 4px 10px rgba(0, 123, 255, 0.3);
  }

  .calendar-day.today {
    border: 1px solid #007bff;
  }

  .calendar-day.empty {
    visibility: hidden;
  }

  /* Main Display Area */
  .selected-link-card {
    padding: 2rem;
    position: relative;
  }

  .description-text {
    font-size: 0.95rem;
    color: #6c757d;
    line-height: 1.6;
  }

  .type-tag {
    display: inline-block;
    padding: 2px 12px;
    border-radius: 6px;
    font-size: 0.7rem;
    font-weight: 800;
    text-transform: uppercase;
  }

  .type-tag.tool {
    background: rgba(67, 160, 71, 0.1);
    color: #43a047;
  }

  .type-tag.article {
    background: rgba(251, 140, 0, 0.1);
    color: #fb8c00;
  }

  .type-tag.tweet {
    background: rgba(3, 169, 244, 0.1);
    color: #03a9f4;
  }

  .type-tag.video {
    background: rgba(229, 57, 53, 0.1);
    color: #e53935;
  }

  .type-tag.website {
    background: rgba(103, 58, 183, 0.1);
    color: #673ab7;
  }

  .calendar-preview-leaf {
    width: 70px;
    height: 80px;
    background: white;
    border-radius: 10px;
    overflow: hidden;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
    display: flex;
    flex-direction: column;
    text-align: center;
    border: 1px solid #eee;
    position: absolute;
    top: -20px;
    right: 30px;
    transform: rotate(5deg);
  }

  .leaf-header {
    background: #ff4757;
    color: white;
    padding: 2px 0;
    font-size: 0.65rem;
    font-weight: 900;
    text-transform: uppercase;
  }

  .leaf-body {
    flex-grow: 1;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    color: #2f3542;
  }

  .day-num {
    font-size: 1.3rem;
    font-weight: 800;
    line-height: 1;
  }

  .month-small {
    font-size: 0.6rem;
    text-transform: uppercase;
    font-weight: 700;
    color: #747d8c;
  }

  [data-theme="dark"] .card-inner {
    background: #252b2d;
    border: 1px solid #3e4446;
  }

  [data-theme="dark"] .description-text {
    color: #adb5bd;
  }

  /* Video Embedding */
  .video-container {
    position: relative;
    padding-bottom: 56.25%;
    /* 16:9 Aspect Ratio */
    height: 0;
    overflow: hidden;
    border-radius: 12px;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
  }

  .video-container iframe {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border: 0;
  }

  @media (max-width: 992px) {
    .dashboard-body {
      grid-template-columns: 1fr;
    }
  }
</style>